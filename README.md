<div align="center">
    <h1><img src="./doc/logo.png" width="20%"></h1>
</div>

**Matlock**, or Matrix Lock, is a screen lock program for X written in C. This
is a fork of the [original implementation](https://tools.suckless.org/slock/).


## Installation

The binary file is available in
[Releases](https://gitlab.sujal.tv/tvsujal/matlock/-/releases).

Alternatively, the binary file can be generated by [compiling the source code
manually](#manual-build).

## Usage

Matlock can be started from the command line interface by issuing the command
`matlock`, or a keybinding may be created.

```sh
# lock screen
matlock

# manual
man matlock

# help
matlock -h
```

## Configuration

At present, all configurations can be made in the C header file
`include/config.h`.

## Manual build <a name="manual-build"></a>

### Requirements

* Tools:
    * A modern C compiler (such as `gcc`; 14.0.0 or newer)
    * `make` (4.4.0 or newer)
* Libraries:
    * The [X Library](https://www.x.org) (a.k.a.
      [`Xlib`](https://www.x.org/releases/current/doc/libX11/libX11/libX11.html)
      or `libX11`), pointed to by the `Make` variables `X11INC` and `X11LIB`
    * [libcrypt](https://github.com/besser82/libxcrypt/), pointed to by the
      `Make` variable `CRYPTLIB`

### Compilation

Download or clone a copy of the source code from
[GitLab](https://gitlab.sujal.tv/tvsujal/matlock).

```sh
# via https
git clone https://gitlab.sujal.tv/tvsujal/matlock.git

# via ssh
git clone ssh://git@gitlab.sujal.tv/tvsujal/matlock.git
```

Refer to [`Makefile`](Makefile) to see all the Make recipes available; refer to
[`Makevars.mk`](Makevars.mk) to configure build settings such as compilation
flags and the build and installation directories.

```sh
# instal afresh
sudo make clean instal

# uninstall
sudo make uninstall
```

By default,

* the build files are created in `/tmp/dwm` and can be changed by setting the
  variable `BUILD_DIR`;
* the installation directory is `/usr/local` and can be modified by setting the
  variable `PREFIX`;
    * the binary file will be located in `PREFIX/bin`;
    * the user manual will be located in `PREFIX/shares/man/man1`; and
    * the licence file and other files, if any, will be located in
      `PREFIX/shares/matlock`

